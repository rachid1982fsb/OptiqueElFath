
<%= form_with(model: @order, local: true) do |form| %>

<div class="card">
  <div class="card-header">
    <div class="btn-toolbar justify-content-between" role="toolbar" aria-label="Toolbar with button groups">

      <h2>Editing Order for <%= @order.customer.first_name%></h2>

      <div class="form-check form-switch">
        <%= form.check_box :completed, class:"form-check-input" %>
        <label class="form-check-label" for="flexSwitchCheckChecked"> Order Completed</label>
      </div>
    </div>

  </div>

  <div class="card-body">
    <% if @order.errors.any? %>
      <div id="error_explanation">
        <h2><%= pluralize(order.errors.count, "error") %> prohibited this order from being saved:</h2>
  
        <ul>
          <% order.errors.full_messages.each do |message| %>
            <li><%= message %></li>
          <% end %>
        </ul>
      </div>
    <% end %>
  
    <% cur_customer = params[:format] || @order.customer_id%>
    
    <% if cur_customer %>
    <div class="row g-3">
      
    <div class="field for m-group col-md-3">
    <label>Frame</label>
    <%= form.collection_select(:item_id, Item.all, :id, :desplay_name, :required => true)%>
    </div>

    <div class="field for m-group col-md-3">
      <%= form.label :Kind_of_glasses %>
      <%= form.select :Kind_of_glasses, :collection => kind_glass_display  %>

    </div>
  
    <div class="field for m-group col-md-3">
      <%= form.label :glasses_type %>
      <%= form.select :glasses_type, :collection => glasses_display %>
    </div>

    
    <div class="field for m-group col-md-3">
      <%= form.label :indice %>
      <%= form.select :indice,  :collection => indice_display   %>
    </div>
      
        <div class="field for m-group col-md-2">
          <%= form.label :r_measurement %>
          <%= form.text_field :r_measurement, 
          class:"form-control", :required => true %>
        </div>
      
        <div class="field for m-group col-md-2">
          <%= form.label :l_measurement %>
          <%= form.text_field :l_measurement,
          class:"form-control", :required => true %>
        </div>
      
        <div class="field for m-group col-md-2">
          <%= form.label :add_measurement %>
          <%= form.text_field :add_measurement, 
          class:"form-control", :required => true %>
        </div>
      
      
        <div class="field for m-group col-md-4">
          <label>Doctor Name</label>
          <%= form.text_field :image_doctor_visit,
          class:"form-control" %>
        </div>
      
        <div class="field for m-group col-md-4">
          <%= form.label :glass_Cost_in %>
          <%= form.number_field :glass_Cost_in, 
          class:"form-control" %>
        </div>
      
        <div class="field for m-group col-md-4">
          <%= form.label :glass_price_out %>
          <%= form.number_field :glass_price_out, 
          class:"form-control" %>
        </div>
        
        <div class="field for m-group col-md-4">
          <%= form.label :amount_paid %>
          <%= form.number_field :amount_paid, 
          class:"form-control" %>
        </div>
        <div class="field for m-group col-md-4">
          <%= form.label :total_price %>
          <%= form.number_field :total_price, 
          class:"form-control" %>
        </div>

        <div class="field for m-group col-md-4">
          <%= form.label :last_d_v_date %>
          <%= form.date_select :last_d_v_date, 
          class:"form-control" %>
        </div>

        <div class="field for m-group col-md-4">
          <%= form.label :return_date %>
          <%= form.date_select :return_date, 
          class:"form-control" %>
        </div>

       
        <div class="field for m-group col-md-4">
          <%= form.label :comment %>
          <%= form.text_field :comment, 
          class:"form-control" %>
        </div>
  
        <div class="field for m-group col-md-4">
          <%= form.label :image %>
          <%= form.file_field :image, 
          class:"form-control" %>
        </div>
       
        <div class="field for m-group col-md-4">
          <%= form.number_field :customer_id, id: :order_customer_id, value: cur_customer, type: :hidden, 
          class:"form-control" %>
        </div>
      
        <p> <strong>params:</strong> <%= params %> </p>

        
        
        <div class="actions">
          <%= form.submit method: :update, data: { confirm: 'Are you sure?' }, class:"btn btn-outline-success btn-sm"%>
        </div>

        <div class="actions">
        <%= link_to 'Delete', @order, method: :delete, data: { confirm: 'Are you sure?' }, class:"btn btn-outline-danger btn-sm" %></td>
        </div>

        <div class="actions">
          <%= link_to 'Back', orders_path %>
        </div>
      </div>
    <% end %>
   
  </div>
</div>
<% end %> 